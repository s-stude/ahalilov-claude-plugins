# Work Planner Plugin

Comprehensive pre-implementation planning and codebase analysis for Claude Code. This plugin helps create detailed implementation plans before writing code, ensuring better architecture, fewer false starts, and smoother integration with existing codebases.

## Overview

The Work Planner skill systematically analyzes user requests, explores codebases, and proposes detailed implementation strategies. It ensures you understand the landscape before making changes, leading to better decisions and more maintainable code.

**Core principle:** Plan before you code. Understanding the landscape prevents false starts and ensures changes integrate smoothly.

## Features

- **Systematic Codebase Exploration**: Discover existing patterns, conventions, and architecture
- **Detailed Implementation Plans**: Step-by-step plans with rationale and alternatives
- **Smart Questioning**: Ask clarifying questions when multiple approaches are valid
- **Pattern Recognition**: Learn and follow project-specific coding standards
- **Risk Identification**: Anticipate potential issues before implementation
- **Progressive Disclosure**: Concise main skill with detailed reference documentation

## When to Use

Use the work-planning skill for non-trivial implementation tasks:

- **Feature additions**: Adding meaningful new functionality
- **Bug investigations**: Understanding and fixing complex issues
- **Refactoring tasks**: Restructuring code architecture
- **Integration work**: Connecting new services or APIs
- **Multi-file changes**: Tasks affecting multiple components
- **Architectural decisions**: Choosing between implementation approaches

Skip planning for simple tasks like typo fixes, one-line changes, or obvious modifications.

## Installation

1. Clone or copy this plugin into your Claude Code plugins directory:
   ```bash
   cp -r work-planner ~/.claude/plugins/
   ```

2. Create your local settings file (optional):
   ```bash
   cp .claude/work-planner.local.md.example .claude/work-planner.local.md
   ```

3. Customize settings in `.claude/work-planner.local.md` for your project

## Usage

The work-planning skill is triggered when Claude detects planning would be beneficial, or when you explicitly request it:

### Automatic Triggering

Claude will use this skill when you request:
- "Implement user authentication"
- "Add a feature to..."
- "Fix the bug where..."
- "Refactor the payment module"

### Manual Invocation

Explicitly request planning:
- "Help me plan the implementation of..."
- "Create a plan for..."
- "What's the best approach for..."

### Example Workflow

```
User: "Add user authentication to the app"

Claude (using work-planner):
1. Understands you want to add auth system
2. Explores codebase for existing patterns
3. Asks clarifying questions (JWT vs sessions, etc.)
4. Proposes detailed implementation plan
5. Gets your approval before implementing
```

## Configuration

### Settings File

Create `.claude/work-planner.local.md` to customize behavior:

```yaml
---
enabled: true
verbosity: detailed  # silent | brief | detailed
thoroughness: medium # quick | medium | thorough
maxFilesToExplore: 20
excludePatterns:
  - "**/node_modules/**"
  - "**/dist/**"
customGuidelines: |
  - Always consider backward compatibility
  - Check for existing patterns in /core directory
---
```

### Settings Reference

**enabled**: Enable/disable the plugin (default: true)

**verbosity**: Control output detail level
- `silent`: Minimal output
- `brief`: Summary only
- `detailed`: Full plan with rationale (default)

**thoroughness**: Exploration depth
- `quick`: Fast exploration for simple tasks
- `medium`: Balanced exploration (default)
- `thorough`: Comprehensive analysis for complex tasks

**maxFilesToExplore**: Limit files read during exploration (default: 20)

**excludePatterns**: Glob patterns for files to skip during exploration

**customGuidelines**: Project-specific planning considerations

## Plan Structure

Plans generated by this skill include:

1. **Understanding**: Summary of what you want
2. **Context**: Relevant codebase patterns discovered
3. **Approach**: Chosen implementation strategy with rationale
4. **Critical Files**: Files that will be modified or created
5. **Implementation Steps**: Ordered steps with descriptions and rationale
6. **Dependencies**: External libraries or tools needed
7. **Testing Strategy**: How to verify the implementation
8. **Risks**: Potential issues and mitigation strategies
9. **Alternatives Considered**: Other approaches and why not chosen

## Examples

### Example 1: Feature Addition

See `skills/work-planning/examples/feature-planning.md` for a complete example of planning a user authentication system.

**Highlights:**
- Discovers existing patterns in codebase
- Asks about JWT vs session-based auth
- Proposes 16-step implementation plan
- Identifies risks and mitigation strategies

### Example 2: Refactoring

See `skills/work-planning/examples/refactoring-planning.md` for a complete example of refactoring a payment module.

**Highlights:**
- Analyzes current code structure
- Identifies code smells and issues
- Proposes Strategy pattern solution
- Plans incremental migration to reduce risk

### Example 3: Bug Fix

See `skills/work-planning/examples/bugfix-planning.md` for a complete example of investigating and fixing a checkout bug.

**Highlights:**
- Investigates root cause systematically
- Identifies the bug: order creation fails after payment succeeds
- Proposes rollback mechanism (refund)
- Adds idempotency protection

## Reference Documentation

The skill includes comprehensive reference guides:

- **planning-workflow.md**: Detailed step-by-step workflow for each planning phase
- **analysis-patterns.md**: Techniques for exploring and understanding codebases
- **question-templates.md**: Templates for asking effective clarifying questions

## Benefits

### Before Using Work Planner
- Jump into implementation without full context
- Miss existing patterns and conventions
- Make architectural decisions in isolation
- Discover issues during implementation
- Need to refactor or rewrite

### After Using Work Planner
- Understand codebase before changing it
- Follow existing patterns consistently
- Make informed architectural decisions
- Anticipate issues before coding
- Implement correctly the first time

## Tips for Best Results

1. **Be specific in requests**: "Add OAuth authentication" is better than "add auth"
2. **Provide context**: Mention constraints, preferences, or requirements upfront
3. **Review the plan**: Plans are proposals - provide feedback and ask questions
4. **Trust the process**: Exploration takes time but prevents costly mistakes
5. **Customize settings**: Adjust verbosity and thoroughness for your needs

## Integration with CLAUDE.md

Work Planner automatically reads and follows your project's `CLAUDE.md` file:
- Coding standards and conventions
- Architectural principles
- Testing requirements
- Deployment considerations

Combine CLAUDE.md project standards with work-planner settings for best results.

## Troubleshooting

**Plan is too detailed**: Set `verbosity: brief` in settings

**Exploration takes too long**: Reduce `thoroughness` to `quick` or lower `maxFilesToExplore`

**Missing important files**: Check `excludePatterns` - may be filtering too broadly

**Questions are too technical**: Provide more context in your initial request

## Version

Current version: 0.1.0

See CHANGELOG.md for version history.

## Contributing

This plugin follows the standard Claude Code plugin structure. To contribute:

1. Fork the repository
2. Create your feature branch
3. Add tests for new functionality
4. Submit a pull request

## License

MIT License

## Support

For issues or questions:
- Check the examples in `skills/work-planning/examples/`
- Review reference docs in `skills/work-planning/references/`
- File an issue on the repository

## Related Plugins

- **code-simplifier**: Refines code for clarity after implementation
- Other planning and analysis plugins (coming soon)

---

**Remember**: Good planning leads to good implementation. Take time to plan, save time implementing.
